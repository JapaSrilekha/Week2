<!DOCTYPE html>
<html>
<head>
    <title>Mini Expense Tracker</title>

    <style>
        body {
            font-family: Arial;
            background: linear-gradient(to right, #667eea, #764ba2);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            background: white;
            padding: 20px;
            width: 450px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        h2 {
            text-align: center;
        }

        input {
            width: 100%;
            padding: 8px;
            margin-top: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        button {
            margin-top: 10px;
            padding: 8px;
            width: 32%;
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        .addBtn { background: #28a745; }
        .viewBtn { background: #007bff; }
        .deleteBtn { background: #dc3545; }

        table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
            font-size: 14px;
        }

        table, th, td {
            border: 1px solid #ccc;
            padding: 5px;
            text-align: center;
        }
    </style>
</head>

<body onload="initDB()">

<div class="container">
    <h2> Mini Expense Tracker</h2>

    <input type="text" id="title" placeholder="Expense Title">
    <input type="number" id="amount" placeholder="Amount">
    <input type="date" id="date">

    <button class="addBtn" onclick="addExpense()">Add</button>
    <button class="viewBtn" onclick="viewExpenses()">View</button>
    <button class="deleteBtn" onclick="deleteExpense()">Delete All</button>

    <div id="output"></div>
</div>

<script>

let db;


function initDB() {

    db = openDatabase("ExpenseDB", "1.0", "Expense Database", 2 * 1024 * 1024);

    if (!db) {
        alert("Database not supported!");
        return;
    }

    db.transaction(function(tx) {

        tx.executeSql(
            "CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, amount REAL, date TEXT)",
            [],
            function() {
                console.log("Table created successfully");
            },
            function(tx, error) {
                alert("Table creation error: " + error.message);
            }
        );

    }, function(error) {
        alert("Transaction Error: " + error.message);
    });
}



function addExpense() {

    let title = document.getElementById("title").value;
    let amount = document.getElementById("amount").value;
    let date = document.getElementById("date").value;

    db.transaction(function(tx) {

        tx.executeSql(
            "INSERT INTO expenses (title, amount, date) VALUES (?, ?, ?)",
            [title, amount, date],
            function() {
                alert("Expense Added Successfully!");
                viewExpenses();
            },
            function(tx, error) {
                alert("Insert Error: " + error.message);
            }
        );

    }, function(error) {
        alert("Transaction Error: " + error.message);
    });
}


function viewExpenses() {

    db.transaction(function(tx) {

        tx.executeSql(
            "SELECT * FROM expenses",
            [],
            function(tx, results) {

                let output = "<table><tr><th>ID</th><th>Title</th><th>Amount</th><th>Date</th></tr>";

                for (let i = 0; i < results.rows.length; i++) {
                    let row = results.rows.item(i);
                    output += "<tr><td>" + row.id + "</td><td>" +
                              row.title + "</td><td>" +
                              row.amount + "</td><td>" +
                              row.date + "</td></tr>";
                }

                output += "</table>";

                document.getElementById("output").innerHTML = output;
            },
            function(tx, error) {
                alert("Select Error: " + error.message);
            }
        );

    }, function(error) {
        alert("Transaction Error: " + error.message);
    });
}


function deleteExpense() {

    db.transaction(function(tx) {

        tx.executeSql(
            "DELETE FROM expenses",
            [],
            function() {
                alert("All Expenses Deleted!");
                viewExpenses();
            },
            function(tx, error) {
                alert("Delete Error: " + error.message);
            }
        );

    }, function(error) {
        alert("Transaction Error: " + error.message);
    });
}

</script>

</body>
</html>